<!DOCTYPE html> 
<html> 
<head> 
	
	<title>MassKara 2012</title> 
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	
	<link rel="stylesheet" href="css/jquery.mobile-1.2.0-rc.1.min.css" />

	<style type="text/css">
		#pMain_Content .pm_content {
			display:none;
		}

		#pVSche  #pVS_title {
			padding-bottom: 10px;
			font-weight: bold;
			text-align: center;
			color: #00ccff;
			font-size: 20px;
		}

		#pVSche  #pVS_time {
			padding: 10px 0;
			border-top: 1px solid #CCC;
			border-bottom: 1px dashed #CCC;
			color: #006600
		}

		#pVSche  #pVS_place {
			padding: 10px 0;
			border-bottom: 1px dashed #CCC;
			color: #6666ff
		}

		#pVSche  #pVS_detail {
			padding: 10px 0;
			border-bottom: 1px solid #CCC;
			color: #373737
		}

	</style>
	
	<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCI0GG4U1L9Kq4_7ZDPL7qjJcyq2j7xXuY&sensor=false"></script>

	<script src="js/jquery-1.8.1.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/cordova-2.0.0.js"></script>
	
	<script>
/******************************************************************************************
			Global Var
*******************************************************************************************/
		var $pMain, $pMain_HD, $pMain_Content;

		var $NB_Sch, $NB_Venue, $NB_Fav, $NB_Info;
		var $c_Sch, $c_Venue, $c_Fav, $c_Info;
		var $c_Sch_List;

		var gObj_cNB; // Current Navi Content Info
		var gObj_Cal_UI; // Calendar UI
		var gObj_Favorite;

		var gArr_place, gArr_subPlace, gArr_sList;
		var gArr_evtListByPlace; // Schedules by Place
		var gArr_weekDay, gArr_sWeekDay, gArr_month, gArr_sMonth;


		// Page View Schedule
		var $pVSche, $pVS_title_txt, $pVS_star, $pVS_time_txt, $pVS_date_txt, $pVS_place, $pVS_detail;


		// Page Map
		var $pMap;
		var gObj_Map;

		// Place List
		var gObj_pList;

		var $pSub_pList;

/****************************************************************
			Navi Bar Object
****************************************************************/
		function MK_Navi( $NB , $content ){
			this.$NB = $NB;
			this.$content = $content;


			// add Events
			$NB_Sch.on("click", function(){
				gObj_cNB.change( $NB_Sch , $c_Sch );
			});

			$NB_Venue.on("click", function(){
				gObj_cNB.change( $NB_Venue , $c_Venue );

			});

			$NB_Fav.on("click", function(){
				gObj_cNB.change( $NB_Fav , $c_Fav );
			});

			$NB_Info.on("click", function(){
				gObj_cNB.change( $NB_Info , $c_Info );
			});
		}


		MK_Navi.prototype = {
			constructor: MK_Navi,
			
			show : function () {  // Show Content

				this.$content.show();
			},

			change : function ( $new_NB , $new_content ) {  // Change Content

				if ( $new_NB ==  this.$NB ) {
					return;
				}

				// Navi Bar State
				this.$NB.removeClass("ui-state-persist");
				$new_NB.addClass("ui-state-persist");


				this.$NB = $new_NB;

				// Change Content 
				this.$content.hide();

				if ( $new_content ==  $c_Fav) { 	// Update Favorite List
					gObj_Favorite.showFavList();
				
				} else if ( $new_content == $c_Sch  ) {  // Update Shedule List
					gObj_Cal_UI.update_sListIcon();
				}

				$new_content.show();
				this.$content = $new_content;
			}	

		};



/****************************************************************
			Schedule Object
****************************************************************/
		function MK_Schedule(time, title, place, subPlace, detail){
			this.time = time;
		    this.title = title;
			this.place = place;
			this.subPlace = subPlace;
			this.detail = detail;
		}

		MK_Schedule.prototype = {
			constructor: MK_Schedule
		};


/****************************************************************
			DaySchedules Object
****************************************************************/
		function MK_DaySchedules( sDate , sList ){
			this.sDate = sDate;
			this.sList = sList; // array of Schedules on sDate
		}

		MK_Schedule.prototype = {
			constructor: MK_DaySchedules
		};

/****************************************************************
			Place Object
****************************************************************/
		function MK_Place(name, addr, latlng, path){
			this.name = name;
			this.addr = addr;
			this.latlng = latlng;
			this.path = path;
		}

		MK_Place.prototype = {
			constructor: MK_Place
		};


/****************************************************************
			Place List Object
****************************************************************/
		function MK_Place_List( ){
			this.$pList = $c_Venue.children('ul');
			
			this.init_evtListByPlace();
			this.create_pList();
		}

		MK_Place_List.prototype = {
			constructor: MK_Place_List

			, init_evtListByPlace : function ( ) { // init gArr_evtListByPlace

				// Schedule Array by Places
				gArr_evtListByPlace = [];
				for ( var i = 0, iCnt = gArr_place.length; i < iCnt; i++ ) {
					gArr_evtListByPlace.push([]);
				}

				for( var i = 0, days = gArr_sList.length; i < days; i++){
					var sList = gArr_sList[i].sList;
					var sCnt = sList.length;

					for(var j=0; j < sCnt; j++) {
						var s = sList[j];

						if ( s.place != null ) {
							gArr_evtListByPlace[ s.place ].push( [i , j] );
						}						
					
					}

				}

			}

			, create_pList : function ( ) {
				var pListHtml = '';
				var pCnt = gArr_place.length;
				
				for(var i = 0; i < pCnt; i++){
					var p = gArr_place[i];

					var eCount = gArr_evtListByPlace[i].length;
					var txtEvt = ( ( eCount > 1 ) ?  eCount + " Events" : eCount + " Event" );

					pListHtml += '<li data-idx="' + i + '"><img src="img/v' + i + '.png" />';
					pListHtml += '<h3 class="ui-li-heading">' + p.name + '</h3>';
					pListHtml += '<p class="ui-li-desc">';
					pListHtml += '<div class="ui-grid-a"><div class="ui-block-a">';				
					pListHtml += '<button type="button" data-bType="event" data-mini="true" data-inline="true" data-icon="info" data-theme="d">' +  txtEvt + '</button></div>';
					pListHtml += '<div class="ui-block-b"><button type="button" data-bType="map" data-mini="true" data-inline="true" data-icon="search" data-theme="e">Map</button></div></div></p></li>';

				}
			
				this.$pList.html(pListHtml).listview('refresh');		
				
				var $pList_Button = this.$pList.find("button");				
				$pList_Button.button().button('refresh');

				// add Events
				$pList_Button.on( "click", function() {
					var $this = $(this);
					var idx = $this.closest("li").data("idx");

					if( $this.attr("data-bType") == "map" ) {
					// Open Map Window
						show_Page_Map( idx , 0 );

					} else {
						// Show Shedule List by Place
						$.mobile.changePage("#pSub_pList");

						show_pSub_sList( idx );
					}
				});


			}
		};
			

/****************************************************************
			Map Page Object
****************************************************************/
		function MK_Map( ){
			
			this.$pM_header = $pMap.find("#pM_header");
			this.$googleMap = $pMap.find("#pMap_content > #googleMap");
			this.pIdx = -1;
		}

		MK_Map.prototype = {
			constructor: MK_Map

			, showMap : function( pIdx , type ) {
				this.pIdx = pIdx;

				//set Title and Addr
				this.$pM_header.find("#pM_title").text( gArr_subPlace[pIdx].name );
				this.$pM_header.find("#pM_addr").text( gArr_subPlace[pIdx].addr );

				$pMap.trigger( 'updatelayout' );

				//set Map height
				this.setMapHeight();
				display_map( pIdx , type );

			}
			
			, setMapHeight : function(){
				var height = $(window).height() - parseInt(this.$pM_header.css("height"), 10) - 2; //Border

				height += "px";
				this.$googleMap.css("height", height);
				
			}
		
		};

		// Draw Google Map
		function display_map( idx , type )
		{
			var pData = ( type == 0 ) ? gArr_place[idx] : gArr_subPlace[idx];

			var pCenter = new google.maps.LatLng( pData.latlng[0] , pData.latlng[1]);
			var path = pData.path;

			var mapProp = {
				center: pCenter,
				zoom:16,
				mapTypeControl:true,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

			if ( path == null ){
				var marker = new google.maps.Marker({
					position:pCenter,
				});
				marker.setMap(map);
			
			} else {
				var pLen = path.length;
				var sPath = [];

				for ( var i = 0 ; i < pLen ; i++ ){
					sPath.push( new google.maps.LatLng( path[i][0], path[i][1] ) );	
				}


				var mkPath=new google.maps.Polyline({
				  path: sPath,
				  strokeColor: "#f00000",
				  strokeOpacity: 0.6,
				  strokeWeight: 3
				  });

				mkPath.setMap(map);
			}


		}


/****************************************************************
			Favorite Object
****************************************************************/
		function MK_Favorite ( ){
			
			this.nameLS = 'favDataV1.0';
			this.fData;
			
			this.init();
		}

		MK_Favorite.prototype = {
			constructor: MK_Favorite
			, init : function () {
				// init Local Storage
				if ( typeof localStorage[ this.nameLS ] == "undefined" ){

					// Clear localStorage
					localStorage.clear();

					// Create New Data					
					this.fData = [];

					var tmp_arr;
					
					for ( var i = 0, iCnt = gArr_sList.length; i < iCnt ; i++ ) {
						tmp_arr = [];	
						for ( var j = 0, jCnt = gArr_sList[i].sList.length ; j < jCnt ; j++ ) {
												
							tmp_arr.push(0);
						}
						
						this.fData.push(tmp_arr);
					}
					
					this.save();

				} else {
					this.fData = JSON.parse(localStorage[ this.nameLS ]);
				}

				// add Events
				$c_Fav.find("ul").on( "click", "li[data-role != list-divider]", function(){
					show_Page_View_Schedule ( $(this).data("didx") , $(this).data("sidx") );

					return false;
				});		

				$c_Fav.find("ul").on( "click", ".flist_del", function() {								

					var $li = $(this).closest("li");

					gObj_Favorite.setFavIcon( $li.data("didx") , $li.data("sidx") );
					gObj_Favorite.showFavList();

					return false;
				});



			}

			, save : function() {
				localStorage[this.nameLS] = JSON.stringify( this.fData );
			}

			, getFavIcon : function ( didx , sidx ) {
				var fIcon = ["star.png", "star2.png"];
				var i = 0;

				if( typeof (this.fData[didx][sidx]) != "undefined" ) {
					i = this.fData[didx][sidx];					
				}

				var imgPath = "img/" + fIcon[ i ];

				return imgPath;				
			}

			, setFavIcon : function ( didx, sidx, $img ) {
				var v = this.fData[didx][sidx];

				v++;
				this.fData[didx][sidx] = v % 2;

				if ( !isUD($img) ) {
					$img.attr("src", this.getFavIcon( didx, sidx ) );
				}

			}

			, showFavList : function ( ) {
				var fListHtml = "";
				var $fList = $c_Fav.find("ul");

				// Find Selected Favoite Icon
				var fItemCount = 0;
				for ( var i = 0, iCnt = gArr_sList.length; i < iCnt ; i++ ) {
					var firstDivier = true;					

					for ( var j = 0, jCnt = gArr_sList[i].sList.length ; j < jCnt ; j++ ) {
						
						if ( this.fData[i][j] == 1 ){
							var jSchedule = gArr_sList[i].sList[j];
							var sPlace = ( jSchedule.place ) ? ( "@ " + gArr_place[jSchedule.place].name ) : "";
							var sTime = getSTime ( jSchedule );

							if ( firstDivier ) {
								firstDivier = false;
								
								var cDay = gArr_sList[i].sDate;
								var tDay = gArr_weekDay[ cDay.getDay() ] + " " + cDay.getDate() + " " + gArr_month[cDay.getMonth()] + " " + cDay.getFullYear();
								
								fListHtml += '<li data-role="list-divider">' + tDay + '</li>';
							}
							
							fItemCount++;

							fListHtml += '<li data-didx="' + i + '" data-sidx="' + j + '"><a>';
							fListHtml += '<h3 class="ui-li-heading">' + jSchedule.title + '</h3>';
							fListHtml += '<p class="ui-li-desc">' + sTime + " " + sPlace + '</p>';
							fListHtml += '</a><a class="flist_del">Delete</a></li>';
						}
					}

				}		

				// No Selected Event
				if ( fItemCount == 0 ){
					fListHtml = '<li data-role="list-divider"><h3 class="ui-li-heading">No events added. <br/>Tap a star icon to add an event.</h3></li>';
				}

				$fList.html( fListHtml ).listview('refresh');		
				
			}

		};





/****************************************************************
			Calendar UI Object
****************************************************************/
		function MK_UI_Calendar ( ) {

			this.idx = this.get_idxForToday();

			this.fixedIdx = this.idx;

			this.isPopupOpen = false;
			
			this.$main = $c_Sch.children("#c_Sch_calUI");
			this.$lBtn = this.$main.find("#c_Sch_cui_LB");
			this.$rBtn = this.$main.find("#c_Sch_cui_RB");
			this.$cBtn = this.$main.find("#c_Sch_cui_date");
			this.$popup = $("#popupSelDate");		
			this.$popupList = this.$popup.find("ul");
			

			this.addEvts();

			this.update();
		}

		MK_UI_Calendar.prototype = {
			constructor: MK_UI_Calendar

			, addEvts : function(){
				
				this.$rBtn.on("click", function(){
					gObj_Cal_UI.click_rBtn();
				});

				this.$lBtn.on("click", function(){
					gObj_Cal_UI.click_lBtn();
				});

				this.$cBtn.on("click", function(){
					gObj_Cal_UI.$popup.popup( "open" );
				});

				this.$popup.bind({
					popupbeforeposition: function(event, ui) {
						gObj_Cal_UI.update_popupList();

						gObj_Cal_UI.isPopupOpen = true;
					}
				});

				this.$popup.bind({
					popupafterclose: function(event, ui) {
						gObj_Cal_UI.isPopupOpen = false;
					}
				});

				this.$popupList.on("click", "li", function(){
					var idx = $(this).data('idx');

					if( idx > -1 ) {
						gObj_Cal_UI.select_pDate( idx );
						gObj_Cal_UI.$popup.popup( "close" );
					}
				});

				$c_Sch_List.on("click", "img", function(){

					var $li = $(this).closest( "li" );
					gObj_Favorite.setFavIcon( $li.data("idx") , $li.data("sidx") , $(this) );

					return false;
				});		


				$c_Sch_List.on("click", "li[data-role != list-divider]", function(){
					show_Page_View_Schedule ( $(this).data("idx") , $(this).data("sidx") );
					return false;
				});		



			}

			, get_idxForToday : function () {
				var sListLength = gArr_sList.length;

				var fDay = gArr_sList[0].sDate;
				var lDay = gArr_sList[sListLength - 1].sDate;
				var today = new Date();
				var selDay; // Selected Day
				var idx; // Selected Day Index in gArr_sList

	//today.setFullYear(2012,9,20); // for test

				today.setHours(0);
				today.setMinutes(0);
				today.setSeconds(0);
				today.setMilliseconds(0);

				if( cmp_date( today , fDay ) == -1 ) {
				// Before MassKara : Show fDay
					selDay = fDay;
					idx = 0;

				} else if (cmp_date( today , lDay ) == 1) {
				// After MassKara : Show lDay
					selDay = lDay;
					idx = sListLength - 1;
				
				} else {
				// During MassKara
					for( var i = 0; i < sListLength; i++ ) {
						var itm = gArr_sList[i].sDate;

						if( cmp_date( today , itm) <= 0 ) {
							selDay = itm;
							idx = i;

							break;
						}
					} // for( var i = 0; i < sListLength; i++ )
				} // if( cmp_date( today , fDay ) == -1 )

				return idx;
			} // get_idxForToday : function
		
			, update : function(){
				this.set_calUI();
				this.show_sList();
			}

			, update_popupList : function (){

				var txt = '<li data-role="list-divider" data-idx="-1">Select Day</li>';
				var theme = ["a", "c"];

				var theme_count = 0;

				for ( var i = 0, iCount = gArr_sList.length; i < iCount; i++ ) {
					
					if( i == this.idx ) continue;

					var iDate = gArr_sList[i].sDate;
					var txtDay =  "" + gArr_sWeekDay[ iDate.getDay() ] + " " + iDate.getDate() + " " + gArr_sMonth[iDate.getMonth()];

					txt += '<li data-icon="false" data-theme="' + theme[ theme_count++ % 2 ] + '" data-idx="' + i + '">';
					txt += '<p class="ui-li-desc"><b>' + txtDay  + '</b></p>';
					txt += '<span class="ui-li-count">' + gArr_sList[i].sList.length + '</span></li>';
				}

				gObj_Cal_UI.$popupList.html(txt).listview('refresh');


			}

			, set_calUI : function(){
				this.$cBtn.text(this.getBtnTxt( this.idx , 0 )).button('refresh');

				var $pRBT = this.$rBtn.parent();
				var $pLBT = this.$lBtn.parent();

				if( $pRBT.css("display") == "none" ) $pRBT.show();
				if( $pLBT.css("display") == "none" ) $pLBT.show();

				// Set Left, Right Buttons
				if ( this.idx == 0 ) {
					// Hide Left Button
					$pLBT.hide();

					this.$rBtn.text( this.getBtnTxt( 1 ) ).button('refresh');
				
				} else if ( this.idx == gArr_sList.length - 1 ) {
					// Hide Right Button
					$pRBT.hide();
					this.$lBtn.text( this.getBtnTxt( this.idx - 1 ) ).button('refresh');

				} else {
					this.$lBtn.text( this.getBtnTxt( this.idx - 1 ) ).button('refresh');
					this.$rBtn.text( this.getBtnTxt( this.idx + 1 ) ).button('refresh');
				}
			}

			, show_sList : function(){
				var sList = gArr_sList[this.idx].sList;
				var cDay = gArr_sList[this.idx].sDate;
				var tDay = gArr_weekDay[ cDay.getDay() ] + " " + cDay.getDate() + " " + gArr_month[cDay.getMonth()] + " " + cDay.getFullYear();

				var txt = '<li data-role="list-divider"><h3 class="ui-li-heading">' + tDay + '</h3><span class="ui-li-count">' + gArr_sList[this.idx].sList.length + '</span></li>';

				for ( var i=0, iCnt= sList.length; i < iCnt; i++ ) {
					var cs = sList[i];
					var title = cs.title;
					var place = "";
					
					if ( cs.place != null ) {
						place = " @ " +  gArr_subPlace[ cs.subPlace ].name; 
					}

					txt += '<li data-idx="' + this.idx + '" data-sidx="' + i + '" ><a>';
					txt += '<img src="' +  gObj_Favorite.getFavIcon( this.idx, i ) + '" class="ui-li-icon" />';
					txt += '<h3 class="ui-li-heading">' + title + '</h3>';
					txt += '<p class="ui-li-desc">' + getSTime( cs ) + place + '</p></a></li>';			
				}

				$c_Sch_List.html(txt).listview('refresh');
			}

			, update_sListIcon : function () {
				// Check schedule List Favorite Icon
				var $img = $c_Sch_List.find("li[data-role != list-divider] a img")
				var didx = gObj_Cal_UI.idx;
				
				$img.each( function(i) {
					$(this).attr("src", gObj_Favorite.getFavIcon( didx, i ) );
				});
			}


			, getBtnTxt : function ( i , type ) {
				var iDay = gArr_sList[i].sDate;

				if( type == 0 )
					return ( "" + iDay.getDate() + " " + gArr_sMonth[ iDay.getMonth() ] );
				else
					//return ( "" + iDay.getDate() + " " + gArr_sMonth[ iDay.getMonth() ] );
					return ( "" + iDay.getDate());
			}

			, click_rBtn : function( ) {
				this.idx++;
				this.update();
			}

			, click_lBtn : function( ) {
				this.idx--;
				this.update();
			}

			, select_pDate : function( idx ) {
				this.idx = idx;
				this.update();
			}

			, closePopup : function( idx ) {
				this.$popup.popup( "close" );
			}

		} // MK_UI_Calendar.prototype
				

/******************************************************************************************
			Util Functions
*******************************************************************************************/
		// Check undefined
		function isUD ( v ) {
			return ( typeof ( v ) == "undefined" ? true : false );
		}

		// Conlose Log
		function log( v ) {
			if ( typeof ( console ) != "undefined" ) {
				console.log( v );	
			}
		}

		// Return  -1 : di is old date ,  0 : d1 == d2 ,  1 : d2 is old date
		function cmp_date( d1 , d2 ) {

			var d1Time = d1.getTime();
			var d2Time = d2.getTime();

			if( d1Time > d2Time ) return 1;

			if( d1Time < d2Time ) return -1;
			else return 0;
		}

		// Get Schedule Time
		function getSTime ( sData ) {
			var sTime = ( typeof(sData.time) == "object") ? ( sData.time[0] + " - " + sData.time[1] ) : sData.time;

			return sTime;
		}

		// Check Network Connection for Mobile Device
		function checkConnection() {

			if( typeof(Connection) != "undefined"){
				var networkState = navigator.network.connection.type;
				if( networkState == Connection.NONE) {
					alert("Sorry! For this service, you need a network connection!");
					return false;
				}
			}

			return true;
		}

/******************************************************************************************
			Init Functions
*******************************************************************************************/
		function init_vals(){
			gArr_weekDay = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ];
			gArr_sWeekDay = [ "Sun", "Mon", "Tue", "Wen", "Thu", "Fri", "Sat" ];
			gArr_month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "Decmber"];
			gArr_sMonth = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

		}

		function init_Selectors ( ) {
			$pMain_HD = $pMain.children("#pMain_HD");
			$pMain_Content = $pMain.children("#pMain_Content");

			$NB_Sch = $pMain_HD.find("ul #NB_Sch");
			$NB_Venue = $pMain_HD.find("ul #NB_Venue");
			$NB_Fav = $pMain_HD.find("ul #NB_Fav");
			$NB_Info = $pMain_HD.find("ul #NB_Info");

			$c_Sch = $pMain_Content.children("#c_Sch");
			$c_Venue = $pMain_Content.children("#c_Venue");
			$c_Fav = $pMain_Content.children("#c_Fav");
			$c_Info = $pMain_Content.children("#c_Info");	
			
			$c_Sch_List = $c_Sch.children("ul"); // Schedule List

			$pMap = $("#pMap");
		}

//  0 : Bacolod Public Plaza,  1 : SM City Event Center,  2 : Tourism Strip,  
//  3 : Gaisano City,  4 : Orange Gallery,  5 :  Robinsons Mall,  6 : 888 Square mall
//  7 : BAYS Center,  8 : USLS,  9 : Tay Tung Gym, 10 : GoldenFields
//  11 : Bacolod City Government Center,   12 : UNOR   


		function init_Places ( ) {
			gArr_place = [
							new MK_Place( "Bacolod Public Plaza Area", "Downtown Bacolod City", ["10.669297", "122.946418"], null )

							, new MK_Place( "SM City Event Center", "Rizal Street Bacolod City", ["10.671865857143", "122.9439727"], null )
							, new MK_Place( "Tourism Strip", "Lacson Street Bacolod City", ["10.67896135166121", "122.95415734438487"], 
								[ [ "10.674976063084513" , "122.95267676500862" ] , [ "10.683853274639183" , "122.95630311159675" ] ] )

							, new MK_Place( "Gaisano City", "Bacolod City", ["10.659248", "122.939717"], null )

							, new MK_Place( "Orange Gallery, Art District", "Lopue's Annex Bldg, Lacson St. Mandalagan Bacolod City", ["10.694949", "122.960641"], null )				
							, new MK_Place( "Robinsons Place Bacolod", "Lacson St. Mandalagan Bacolod City", ["10.691267", "122.95838"], null )
							, new MK_Place( "888 Chinatown Square", "Gatuslao St. Bacolod City", ["10.673291", "122.949693"], null )
							, new MK_Place( "BAYS Center", "San Juan St. Bacolod City", ["10.669998", "122.945395"], null )
							, new MK_Place( "University of St. La Salle", "La Salle Avenue Bacolod City", ["10.678725", "122.962444"], null )
							, new MK_Place( "Tay Tung Gym", "Bacolod Tay Tung High School, Hernaez St. Bacolod City", ["10.661983", "122.948364"], null )
							, new MK_Place( "Goldenfields Area", "Goldenfields Bacolod City", ["10.649273", "122.938696"], null )
							, new MK_Place( "Bacolod City Government Center", "Bacolod City", ["10.658671", "122.966654"], null )
							, new MK_Place( "University of Negros Occidental - Recolletos", "Lizares St., Bacolod City", ["10.655941", "122.948344"], null )
							
						]; 


//  0 : Bacolod Public Plaza,  1 : MassKara Carnival Site,  2 : SM City Event Center,  3 : Tourism Strip,  
//  4 : LCC Rizal Main Gate,  5 : Orange Gallery,  6 :  Robinsons Fountain Area,  7 : 888 Square mall
//  8 : BAYS Center,  9 : USLS,  10 : Tay Tung Gym,  11 : Streets along the Public Plaza, 12 : Casino Filipino
//  13 : Gonzaga St. - Gatuslao St.  14 : San Juan St,  15 : USLS Coliseum    16 : USLS Courtyard
// 17 : Bacolod City Government Center,  18 : Robinsons Fountain Area,	19 : UNOR,  20 : San Sebastian Cathedral
// 21 : Gaisano City	22 : Capitol Lagoon to Bacolod Public,   23 : Super Bowling Lanes,  24 : Gonzaga St.
// 25 : Gatuslao St.

			gArr_subPlace = [
							new MK_Place( "Bacolod Public Plaza", "Downtown Bacolod City", ["10.669297", "122.946418"], null )
							, new MK_Place( "MassKara Carnival Site", "Downtown Bacolod City", ["10.670175448997508", "122.9448652267456"], null )
							, gArr_place[1]
							, gArr_place[2]
							, new MK_Place( "Ground FL., LCC Rizal Main Gate", "Gatuslao St. Bacolod City", ["10.670501", "122.947546"], null )
							, gArr_place[4]
							, gArr_place[5]
							, gArr_place[6]
							, gArr_place[7]
							, gArr_place[8]
							, gArr_place[9]
							, new MK_Place( "Streets along the Public Plaza", "San Juan St., Gonzaga St. & Gatuslao St., Bacolod City", ["10.669297", "122.946418"], 
								[ [ "10.66949191958391" , "122.94742811443325" ] , [ "10.668395409126543" , "122.94690776588436" ], [ "10.669125537923776" , "122.94531721593853" ] , [ "10.670124519972504" , "122.94602263690945" ] ] )
							, new MK_Place( "Ampitheather, Casino Filipino", "Goldenfields Bacolod City", ["10.649273", "122.938696"], null )
							, new MK_Place( "Gonzaga St. - Gatuslao St.", "Gonzaga St. & Gatuslao St., Bacolod City", ["10.669297", "122.946418"], 
								[ [ "10.66949191958391" , "122.94742811443325" ] , [ "10.668395409126543" , "122.94690776588436" ], [ "10.669125537923776" , "122.94531721593853" ] ] )
							, new MK_Place( "San Juan St.", "San Juan St., Bacolod City", ["10.669297", "122.946418"], 
								[ [ "10.669125537923776" , "122.94531721593853" ] , [ "10.670124519972504" , "122.94602263690945" ]  ] )
							, new MK_Place( "USLS Coliseum", "University of St. La Salle, Bacolod City", ["10.678625", "122.961285"], null )
							, new MK_Place( "USLS Courtyard", "University of St. La Salle, Bacolod City", ["10.678725", "122.962444"], null )
							, new MK_Place( "Bacolod Gov’t Center grounds", "Bacolod City Government Center, Bacolod City", ["10.659167", "122.965686"], null )
							, new MK_Place( "Robinsons Fountain Area", "Central Citywalk Robinsons, Mandalagan Bacolod City", ["10.691731", "122.957053"], null )
							, gArr_place[12]
							, new MK_Place( "San Sebastian Cathedral", "Rizal St., Bacolod City", ["10.670508", "122.947204"], null )
							, gArr_place[3]
							, new MK_Place( "Capitol Lagoon to Bacolod Public", "Bacolod City", ["10.669297", "122.946418"], null )
							, new MK_Place( "Super Bowling Lanes, Goldenfields", "Goldenfield Commercial Complex Bacolod City", ["10.649384", "122.938453"], null )
							, new MK_Place( "Gonzaga St.", "Gonzaga St., Bacolod City", ["10.669297", "122.946418"], [ [ "10.668395409126543" , "122.94690776588436" ], [ "10.669125537923776" , "122.94531721593853" ] ] )
							, new MK_Place( "Gatuslao St.", "Gatuslao St., Bacolod City", ["10.669297", "122.946418"], [ [ "10.66949191958391" , "122.94742811443325" ] , [ "10.668395409126543" , "122.94690776588436" ] ] )

						];


		}

		function init_Schedules ( ) {

			// Schedule Dates
			var mkYear = 2012;
			var mkMonth = 9;
			var allDay = "all-day";
			var sDate, sList;

			gArr_sList = [];

			// 2012 Oct 1
			sDate = new Date(mkYear, mkMonth, 1);
			sList = [
						new MK_Schedule(allDay, "Opening of the Festival sites", 0, 0, null)
						, new MK_Schedule(allDay, "Opening of Carnival sites", 0, 1, null)
						, new MK_Schedule(["8:00 am", "9:00 am"], "FSCAB Thanksgiving Mass Elderly Week Celeration", 7, 8, null)
						, new MK_Schedule(["4:00 pm", "6:30 pm"], "DepEd Annual Division Athletic and Cultural Meet", 0, 0, null)
						, new MK_Schedule(["7:00 pm", "8:00 pm"], "Opening of 2012 MassKara Festival (with fireworks after)", 0, 0, null)
						, new MK_Schedule(["8:00 pm", "10:00 pm"], "GMA DanssKara: The MassKara Dance Showdown (Eliminations)", 0, 0, null)
					];	

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 2
			sDate = new Date(mkYear, mkMonth, 2);
			sList = [
						new MK_Schedule(["7:30 pm", "11:30 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
						, new MK_Schedule(["8:30 pm", "9:30 pm"], "Parade of Masks/Drumbeaters", null, null, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 3
			sDate = new Date(mkYear, mkMonth, 3);
			sList = [
						new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 4
			sDate = new Date(mkYear, mkMonth, 4);
			sList = [
						new MK_Schedule(["4:30 pm", "8:00 pm"], "FSCAB Coronation Night", 7, 8, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 5
			sDate = new Date(mkYear, mkMonth, 5);
			sList = [
						new MK_Schedule(allDay, "MassKara Art Weekend", null, null, "Opening of art events: MassKara 9 group show, Magika MassKara, Art Tour")
						, new MK_Schedule(["4:00 pm", "6:00 pm"], "RONA Media “Dalan sa Kadalag-an” Amateur Singing Contest", null, null, null)
						, new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:00 pm", "10:00 pm"], "Unveiling: Majika MassKara 9: Ang Bukid Kag Baybay sa Bacolod", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "9:00 pm"], "SMB Music Night (Disco)", 0, 11, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );

			// 2012 Oct 6
			sDate = new Date(mkYear, mkMonth, 6);
			sList = [
						new MK_Schedule(allDay, "MassKara Art Weekend", null, null, null)
						, new MK_Schedule(["4:00 pm", "7:00 pm"], "Aksyon Radyo Blow by Blow…Show No Mercy2, Professional Boxing Competition", 10, 12, null)
						, new MK_Schedule(["5:00 pm", "6:00 pm"], "Opening: LCC Giant MassKara Puppets Replica Exhibits", 0, 4, null)
						, new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["6:00 pm", "9:00 pm"], "MassKara Queen Talent Night", 2, 2, null)
						, new MK_Schedule(["6:00 pm", "8:00 pm"], "Opening: 9D - A Visual Arts Exhibit by the MassKara 9", 4, 5, null)
						, new MK_Schedule(["7:30 pm", "9:00 pm"], "SMB Music Night (Disco)", 0, 13, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );

			// 2012 Oct 7
			sDate = new Date(mkYear, mkMonth, 7);
			sList = [
						new MK_Schedule(allDay, "MassKara Art Weekend", null, null, null)
						, new MK_Schedule(["4:00 pm", "6:00 pm"], 'RONA Media "Dalan sa Kadalag-an" Amateur Singing Contest', null, null, null)
						, new MK_Schedule(["6:00 pm", "8:00 pm"], 'Installation: Majika MassKara floats in host venues: PanAsiatic Call Centers', null, null, null)
						, new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "SMB Band", 0, 13, null)
						, new MK_Schedule(["7:30 pm", "9:00 pm"], "SMB Music Night (Disco)", 0, 14, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition 1st Weekly Semi-Finals", 0, 13, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 8
			sDate = new Date(mkYear, mkMonth, 8);
			sList = [
						new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:30 am", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition 2nd Nightly Eliminations", 0, 11, null)
						, new MK_Schedule(["8:30 pm", "10:00 pm"], "Parade of Masks/Drumbeaters", null, null, null)						
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 9
			sDate = new Date(mkYear, mkMonth, 9);
			sList = [
						new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 10
			sDate = new Date(mkYear, mkMonth, 10);
			sList = [
						new MK_Schedule(["1:00 pm", "9:00 pm"], "Bacolod-Negros Arnis Federation Arinis Competition", 7, 8, null)
						, new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "8:30 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
						, new MK_Schedule(["8:30 pm", "10:00 pm"], "Night of Mardi Gras", null, null, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 11
			sDate = new Date(mkYear, mkMonth, 11);
			sList = [
						new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "10:00 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
						, new MK_Schedule(["8:30 pm", "10:00 pm"], "Night of Mardi Gras", null, null, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );



			// 2012 Oct 12
			sDate = new Date(mkYear, mkMonth, 12);
			sList = [
						new MK_Schedule(["12:00 pm", "1:00 pm"], "i-Witness DocuFest wth GMA News and Public Affairs personalities", 1, 2, null)					
						, new MK_Schedule(["4:00 pm", "8:00 pm"], "MassKara Queen Ramp Modeling & Interview", 1, 2, null)
						, new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)
						, new MK_Schedule(["7:00 pm", "11:45 pm"], 'Jazz Musician’s Lab Bacolod "Jazzkara 2012"', 8, 16, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "SMB Music Night (Disco)", null, null, null)
						, new MK_Schedule(["7:30 pm", "9:00 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			
			
			
			// 2012 Oct 13
			sDate = new Date(mkYear, mkMonth, 13);
			sList = [
						new MK_Schedule(["6:00 am", "11:00 am"], "RMN Trisikad Race", 0, 0, null)
						, new MK_Schedule(["9:00 am", "5:00 pm"], 'Negros Occ. Garden Club "Plant A Tree" Activity', 11, 17, null)
						, new MK_Schedule(["4:00 pm", "7:00 pm"], "MassKara Queen Fantasy Make-up", 5, 18, null)
						, new MK_Schedule(["5:00 pm", "7:00 pm"], "Little Miss MassKara (pageant night)", 1, 2, null)
						, new MK_Schedule(["6:00 pm", "7:00 pm"], "Living Rosary", 0, 0, null)

						, new MK_Schedule(["7:00 pm", "9:00 pm"], "Arnis Phil. Mayor’s Cup Eskrima Sa MassKara Int’l. Invitational Championship", 12, 19, null)
						, new MK_Schedule(["7:00 pm", "11:45 pm"], "Watchmen Daily Journal & MyPhone MassKara 2012 Concert Party", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Coke Band featuring Rated PG Band & Chakra band", 0, 14, null)
						, new MK_Schedule(["7:30 pm", "8:30 pm"], "SMB Music Night (Disco)", 0, 13, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition 2nd Weekly Semi-finals", 0, 11, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 14
			sDate = new Date(mkYear, mkMonth, 14);
			sList = [
						new MK_Schedule(allDay, "Dog Show", 6, 7, null)
						, new MK_Schedule(["7:30 am", "5:00 pm"], "DepEd Cultural Contest", 7, 8, null)
						, new MK_Schedule(["10:00 am", "11:00 am"], "Fiesta Mass", 0, 20, null)
						, new MK_Schedule(["2:00 pm", "5:00 pm"], "Aksyon Radyo TRIBE WARX Amateur grappling Competition", 3, 21, null)
						, new MK_Schedule(["6:00 pm", "7:30 pm"], "Feast of the Holy Rosary Procession, Floral Offering, Marian Bands", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "SMB Band", 0, 13, null)
						, new MK_Schedule(["7:30 pm", "8:30 pm"], "SMB Music Night (Disco)", 0, 14, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 15
			sDate = new Date(mkYear, mkMonth, 15);
			sList = [
						new MK_Schedule(["1:00 pm", "6:00 pm"], "LCC ARFIEN MassKara Puppet Parade", 0, 22, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
						, new MK_Schedule(["8:30 pm", "10:00 pm"], "Parade of Masks/Drumbeaters", null, null, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 16
			sDate = new Date(mkYear, mkMonth, 16);
			sList = [
						new MK_Schedule(["8:00 am", "6:00 pm"], "Negros Occidental Agriculture Movement World Food Day Celebration", 7, 8, null)
						, new MK_Schedule(["6:00 am", "10:00 pm"], "MassKara Preview: A Fashion Show of MassKara Streetdancing Costumes", 0, 0, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 17
			sDate = new Date(mkYear, mkMonth, 17);
			sList = [
						new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
						, new MK_Schedule(["8:30 pm", "10:00 pm"], "Parade of Masks/Drumbeaters", null, null, null)
						, new MK_Schedule(["8:30 pm", "11:45 pm"], "Kami mga Hubin Bowling Club, National Duckpin Bowling Tournament", 10, 23, null)

					];
			
			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );


			// 2012 Oct 18
			sDate = new Date(mkYear, mkMonth, 18);
			sList = [
						new MK_Schedule(["7:00 pm", "11:00 pm"], "MassKara Queen Coronation Night", 8, 15, null)
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition Nightly Eliminations", 0, 11, null)
					];
			
			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );



			// 2012 Oct 19
			sDate = new Date(mkYear, mkMonth, 19);
			sList = [
						new MK_Schedule(["5:00 pm", "11:45 pm"], "Handog Pasasalamat ng Bombo Radyo at Star FM", 0, 0, null)
						, new MK_Schedule(["6:00 pm", "11:59 pm"], "Electric MassKara Day 1: Lights Up, Music On", 2, 3, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["7:00 pm", "9:00 pm"], "(Pagkilita-ay, Pakita-ay) parade kicks off from various parts of Bacolod", null, null, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["7:30 pm", "11:45 pm"], "Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition 3rd Weekly Semi-Final", 0, 11, null)
						, new MK_Schedule(["9:30 pm", "11:45 pm"], "COKE Band featuring Cooler Spring & Undertow Band", 0, 14, null)
						, new MK_Schedule(["9:00 pm", "10:00 pm"], "Floats converge", 2, 3, null)
						, new MK_Schedule(["9:00 pm", "11:45 pm"], "SMB Band Gonzaga St.", 0, 24, null)
						, new MK_Schedule(["9:30 pm", "11:45 pm"], "Pepsi Party Concert", 0, 25, null)
						, new MK_Schedule(["9:30 pm", "10:30 pm"], "Two floats converge on San Juan and Gatuslao Sts. – Plaza", 0, 0, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );

			// 2012 Oct 20
			sDate = new Date(mkYear, mkMonth, 20);
			sList = [
						new MK_Schedule(["2:00 pm", "4:00 pm"], "2012 National Dog Agility Competition (K9 Obedience Club of Negros)", 9, 10, null)
						, new MK_Schedule(["3:00 pm", "7:00 pm"], "Streetdance - Schools Category From Libertad Araneta to Bacolod Public Plaza", 0, 0, null)
						, new MK_Schedule(["4:00 pm", "7:00 pm"], "Jollitown Cosplay Contest", 5, 6, null)
						, new MK_Schedule(["4:00 pm", "6:00 pm"], "Kapuso Mall Show", 1, 2, null)
						, new MK_Schedule(["4:00 pm", "7:30 pm"], "MassKara Arena Competitions (Schools)", 0, 0, null)
						, new MK_Schedule(["6:00 pm", "11:59 pm"], "Electric MassKara Day 2: Lights Up, Music On", 2, 3, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["8:00 pm", "9:00 pm"], "Electric MassKara Performing Float Competitions Kick off ", 1, 2, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["9:00 pm", "11:00 pm"], "Electric MassKara Floats converge", 2, 3, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["10:30 pm", "11:30 pm"], "Cosplay on the Glow: The ABS-CBN/ MOR 101.5 Electric Cosplay competition", 2, 3, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["10:30 pm", "11:45 pm"], "SMB Band featuring Cueshe", 0, 24, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );

			// 2012 Oct 21
			sDate = new Date(mkYear, mkMonth, 21);
			sList = [
						new MK_Schedule(["3:00 pm", "10:00 pm"], "Streetdance - Barangay Category From Libertad Araneta to Bacolod Public Plaza", 0, 0, null)
						, new MK_Schedule(["4:00 pm", "7:30 pm"], "MassKara Arena Competitions Barangays", 0, 0, null)
						, new MK_Schedule(["6:00 pm", "11:59 pm"], "Electric MassKara Day 3", 2, 3, "Street Parties at Tourism Strip and Bacolod Public Plaza continue all night long")
						, new MK_Schedule(["7:00 pm", "11:45 pm"], "SMB Music Night (Disco)", 0, 11, null)
						, new MK_Schedule(["7:00 pm", "9:00 pm"], "Winners' Showdown Electric MassKara float competition", null, null, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );

			// 2012 Oct 22
			sDate = new Date(mkYear, mkMonth, 22);
			sList = [
						new MK_Schedule(allDay, "MassKara Festival Closing Ceremonies", 0, 0, "Street parties at Bacolod Public Plaza continue")
						, new MK_Schedule(["7:00 pm", "8:00 pm"], "Part I: Awarding", 0, 0, null)
						, new MK_Schedule(["7:30 pm", "10:00 pm"], "Part II: Tandâ! Sing Na, Dance Pa! The MassKara Inter-Barangay Talent Competition FINALS", 0, 0, null)
						, new MK_Schedule(["8:00 pm", "9:00 pm"], "Part III: DanssKara Grand Finals/Kapuso Night", 0, 0, null)
					];

			gArr_sList.push( new MK_DaySchedules( sDate , sList ) );

		}

		// Show Schedule View Page
		function show_Page_View_Schedule( idx , sidx){
			$.mobile.changePage("#pVSche");
			
			var schedule = gArr_sList[idx].sList[sidx];

			$pVSche.data("pIdx" , schedule.subPlace);
			$pVSche.data( "didx" , idx );
			$pVSche.data( "sidx" , sidx );
			$pVSche.data( "ovF" , gObj_Favorite.fData[idx][sidx] );

			$pVS_star.attr("src", gObj_Favorite.getFavIcon( idx , sidx ) );
			$pVS_title_txt.text( schedule.title );
			
			var sDate = gArr_sList[idx].sDate;
			$pVS_time_txt.text( getSTime( schedule ) + " , " + gArr_weekDay[ sDate.getDay() ] );
			$pVS_date_txt.text( sDate.getDate() + " " + gArr_month[sDate.getMonth()] + " " + sDate.getFullYear() )

			if( schedule.place != null ) {
				$pVSche.find("#pVS_h #pVS_hMapBtn").button('enable');
				$pVS_place.show();

				var place = gArr_subPlace[ schedule.subPlace ];
				$pVS_place.find("#pVS_pName").text( place.name );
				$pVS_place.find("#pVS_pAddr").text( place.addr );

			} else {
				$pVSche.find("#pVS_h #pVS_hMapBtn").button('disable'); // Hide show Map button
				$pVS_place.hide();
			}


			if( schedule.detail != null ) {
				$pVS_detail.show();

				$pVS_detail.text( schedule.detail );

			} else {
				$pVS_detail.hide();
			}
			
		}

		
		// Show Shedule List by Place
		function show_pSub_sList( idx ) {

			// create Events List
			var txtList = '';
			var evtPlace = gArr_evtListByPlace[idx];

			// place Title
			$pSub_pList.find("#pSub_pl_hd #pSubPL__pTitle").text( gArr_place[idx].name );

			var cDateIdx = -1;
			var calUI_idx = gObj_Cal_UI.fixedIdx;

			
			var $content = $pSub_pList.find("#pSub_pl_content");
			$content.empty();

			var $tc = $( "<div>" );
			var $ul;

			for( var i=0, iCnt = evtPlace.length; i < iCnt; i++ ){
				var didx = evtPlace[i][0];
				var sidx = evtPlace[i][1];

				
				// Set Date
				if( didx != cDateIdx ) {
				// New Date
				
					var nDate = gArr_sList[didx].sDate;
					var tDay = gArr_weekDay[ nDate.getDay() ] + " " + nDate.getDate() + " " + gArr_month[nDate.getMonth()] + " " + nDate.getFullYear();

					var vColl = "false";

					// only if place is Public Plaza
					if ( idx == 0 && calUI_idx != didx ) {
						vColl = "true";
					}



					txtList += '<div  data-role="collapsible"  data-collapsed="' + vColl + '" data-mini="true">';
					txtList += '<h3>' + tDay + '</h3>';
					txtList += '<ul data-role="listview" data-mini="true" data-inset="true" data-theme="c">'

					var $div = $("<div>").attr( { "data-role" :"collapsible", "data-collapsed":vColl, "data-mini":"true" } );

					$("<h3>").text(tDay).appendTo($div);

					$("<ul>").attr({ "data-role" :"listview", "data-mini":"true", "data-inset":"true", "data-theme":"c" }).appendTo($div);

					$tc.append($div);

					$ul = $tc.find("ul").last(); 
				
					cDateIdx = didx;
				}

				// Set Schedule
				var s = gArr_sList[didx].sList[sidx];

				var $li = $("<li>").attr( { "data-didx" :didx, "data-sidx" :sidx } );

				var $a = $("<a>")
							.append( $('<img src="img/star.png" class="ui-li-icon fav_icon">'))
							.append( $('<p>').addClass("ui-li-desc").html('<b>' +  s.title + '</b><br/>' + getSTime(s) + ' @ ' +  gArr_subPlace[ s.subPlace ].name) )
							.appendTo($li);

				
				$li.appendTo($ul);

			}

			
			$content.append($tc);


			$content.find("ul").listview().listview('refresh');

			$content.find('div[data-role=collapsible]').collapsible({theme:'b',refresh:true}); 

			$pSub_pList.data("pIdx", idx);

		}


		function show_Page_Map( idx , type ){
			
			// Network Check
			if ( checkConnection() ){
				$.mobile.changePage("#pMap");
				gObj_Map.showMap( idx , type );
			}
		}


		// Init Device Event
		function initDeviceEvt() {
			document.addEventListener("deviceready", onDR, false);			
		} 

		function onDR(){
			document.addEventListener("backbutton", backKeyDown, true);
			document.addEventListener("pause", onPause, false);

		}

		// Back Key
		function backKeyDown() { 

			var ap = $.mobile.activePage.attr("id");

			log(" Back Key = " + ap);

			if( ap == "pMain" ) {

				if( gObj_Cal_UI.isPopupOpen ) {
					gObj_Cal_UI.closePopup();
				} else {

					// Save favorite to Local Storage
					gObj_Favorite.save();

					navigator.app.exitApp();
				}

			} else {
				history.back();
			}

		}

		// Pause
		function onPause() { 
			gObj_Favorite.save();
		}




		$(document).on('mobileinit', function() {
			$.mobile.defaultPageTransition = "none";
		});

		$(document).ready(function() {
			$pMain = $("#pMain");

			init_vals();
			init_Places();
			init_Schedules();

			// For Screen Rotoation
			$(window).resize(function () {
				var ap = $.mobile.activePage.attr("id");

				// Map Page : Change Height
				if( ap == "pMap" ) {
					gObj_Map.setMapHeight();
				}

			});

			initDeviceEvt();

		 });


		$(document).on('pageinit', '#pMain', function() {
			init_Selectors();		

			gObj_Favorite = new MK_Favorite();

			gObj_cNB = new MK_Navi ( $NB_Sch , $c_Sch );

			// Show Schedule Content
			gObj_cNB.show();


			gObj_Cal_UI = new MK_UI_Calendar( );
			
			gObj_pList = new MK_Place_List( );


			$pMain.on( "pagebeforeshow" , function( evt , ui ) {
				// Check previous Page
				var pID = ui.prevPage.attr("id");

				if ( pID == "pVSche") {
					// Check if there is FIcon change
					if ( $pVSche.data( "ovF" ) != gObj_Favorite.fData[$pVSche.data("didx")][$pVSche.data("sidx")] ) {
						if ( gObj_cNB.$content == $c_Sch ) {
							// Update schedule List Favorite Icon
							gObj_Cal_UI.updateIcon();

						} else if ( gObj_cNB.$content == $c_Fav ) {
							// update Favorite List
							gObj_Favorite.showFavList();
						}
					}
				}

			});

		});  // $(document).on('pageinit', '#pMain', function()


		$(document).on('pageinit', '#pVSche', function() {
			$pVSche = $("#pVSche");

			$pVS_title_txt = $pVSche.find("#pVS_content > #pVS_title > #pVS_title_txt");
			$pVS_star = $pVSche.find("#pVS_content > #pVS_title > img");
			$pVS_time_txt = $pVSche.find("#pVS_content > #pVS_time > #pVS_time_txt");
			$pVS_date_txt = $pVSche.find("#pVS_content > #pVS_time > #pVS_date_txt");
			$pVS_place = $pVSche.find("#pVS_content > #pVS_place");
			$pVS_detail = $pVSche.find("#pVS_content > #pVS_detail");


			$pVS_place.on("click", "#pVS_map", function(){
				// Show Map Page
				show_Page_Map( $pVSche.data("pIdx") , 1 );
			});


			$pVSche.find("#pVS_h #pVS_hMapBtn").on("click", function(){
				// Show Map Page
				show_Page_Map( $pVSche.data("pIdx") , 1 );
			});

			$pVS_star.on("click" , function(){
				
				gObj_Favorite.setFavIcon( $pVSche.data("didx") , $pVSche.data("sidx"), $(this) );

				return false;
			});


		});


		$(document).on('pageinit', '#pMap', function() {
			
			gObj_Map = new MK_Map();

		});

		$(document).on('pageinit', '#pSub_pList', function() {
			
			$pSub_pList = $("#pSub_pList");

			var $pSub_pl_content = $pSub_pList.find("#pSub_pl_content");

			// Add Event
			$pSub_pList.find("#pSub_pl_hd #pSubPL__mBtn").on( 'click', function() {
				show_Page_Map( $pSub_pList.data("pIdx") , 0);

			});

			$pSub_pl_content.on( 'click', 'a', function() {

				var $li = $(this).closest("li");
				show_Page_View_Schedule( $li.data("didx") , $li.data("sidx") );

				return false;

			});


			$pSub_pl_content.on( 'click', 'img', function() {

				var $li = $(this).closest("li");
				gObj_Favorite.setFavIcon( $li.data("didx") , $li.data("sidx") , $(this) );
				
				return false;
			});


			$pSub_pList.on( "pagebeforeshow" , function( evt , ui ) {
				// Check previous Page
				var pID = ui.prevPage.attr("id");

				if ( pID == "pVSche") {
					var di = $pVSche.data("didx");
					var si = $pVSche.data("sidx");

					// Check if there is FIcon change
					if ( $pVSche.data( "ovF" ) != gObj_Favorite.fData[di][si] ) {
						var $li = $pSub_pList.find('#pSub_pl_content li[data-didx="' + di + '"][data-sidx="' + si + '"]');
						$li.find("img").attr("src", gObj_Favorite.getFavIcon( di, si ) );
					}
				}

			});


		});

	</script>

	<script src="js/jquery.mobile-1.2.0-rc.1.min.js"></script>

</head>

<body> 

<!-- Start of Main Page -->
<div data-role="page" id="pMain"  data-theme="d">

	<div data-role="header"  data-position="fixed" data-tap-toggle="false" id="pMain_HD"> 			
		<h1>MassKara 2012</h1>

		<div data-role="navbar">
		   <ul>
			 <li><a data-icon="grid" id="NB_Sch" class="ui-btn-active">Schedule</a></li>
			 <li><a data-icon="home" id="NB_Venue" >Venues</a></li>
			 <li><a data-icon="star" id="NB_Fav" >Favorite</a></li>
			 <li><a data-icon="info" id="NB_Info" >Info</a></li>
		   </ul>
		</div>

	</div>  <!-- /header #pMain_HD -->

	<div data-role="content" id="pMain_Content">

		<div id="c_Sch" class="pm_content"> 

			<div id="c_Sch_calUI"> 
				<div class="ui-grid-b">
					<div class="ui-block-a">
						<span>
						<button data-mini="true" data-inline="true" data-icon="arrow-l"  data-theme="c" id="c_Sch_cui_LB"></button>
						</span>
					</div>
					<div class="ui-block-b">

						<button data-rel="popup" data-role="button" data-mini="true" data-theme="a"  id="c_Sch_cui_date">28 Oct</button>
						<div data-role="popup" id="popupSelDate">
							<ul data-role="listview" data-inset="true" data-theme="e">
							</ul>
						</div>

					</div>
					<div class="ui-block-c" style="text-align:right">
						<span>
						<button data-mini="true" data-inline="true" data-icon="arrow-r" data-iconpos="right" data-theme="c" id="c_Sch_cui_RB"></button>
						</span>
					</div>
				</div>
			</div>
				
			<ul data-role="listview" data-inset="true" data-theme="c">
			</ul>

		</div>

		<div id="c_Venue" class="pm_content"> 
			<ul data-role="listview" data-theme="c" ></ul>
		</div>

		<div id="c_Fav" class="pm_content"> 
			<ul data-divider-theme="e" data-role="listview" data-theme="c" data-split-icon="delete">			
			</ul>
		</div>

		<div id="c_Info" class="pm_content"> 
				
			<ul data-role="listview" data-divider-theme="a" data-inset="true" data-theme="e">	
				<li data-role="list-divider">
					<h3>Silver MassKara<br/> Festival Organization</h3>
				</li>

				<li>
					
					<a href="http://www.themasskarafestival.com/"  target="_blank"><img src="img/web.png" class="ui-li-icon" /><b>Web</b><br/>www.themasskarafestival.com</a>
				</li>


				<li>
					<a href="http://www.facebook.com/BacolodMassKaraFestival"  target="_blank"><img src="img/facebook.png" class="ui-li-icon" />FaceBook<br/>Bacolod MassKara Festival</a>
				</li>

				<li>
					<a href="tel:+63344337362" target="_blank"><img src="img/phone.png" class="ui-li-icon" />Call<br/>(034) 433-7362</a>
				</li>

				<li>
					<a href="mailto:masskarafestival@ymail.com" target="_blank"><img src="img/mail.png" class="ui-li-icon" />Email<br/>masskarafestival@ymail.com</a>
				</li>

			</ul>

			<ul data-role="listview" data-divider-theme="d" data-inset="true" data-theme="b">	
				<li data-role="list-divider">
					<h3>App Development</h3>
				</li>

				<li>
					<a href="mailto:masskarafestival@ymail.com" target="_blank"><img src="img/mail.png" class="ui-li-icon" />Email<br/>yoon.s.hong@gmail.com</a>
				</li>

			</ul>

		</div>

	</div> <!-- /content #pMain_Content -->
</div><!-- /page #pMain -->


<!-- Start of View Schedule Page -->
<div data-role="page" id="pVSche"  data-theme="d" data-add-back-btn="true">
	
	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-theme="b" id="pVS_h">
		<h1>MassKara 2012</h1>
		<button data-icon="search" class="ui-btn-right" data-iconpos="right" data-theme="e" id="pVS_hMapBtn">Map</button>
	</div>

	<div data-role="content" id="pVS_content">

		<div id="pVS_title">
			<img src="img/star.png" width="20" height="20"> <span id="pVS_title_txt"></span>
		</div>
		
		<div id="pVS_time">
			<img src="img/clock.png" width="16" height="16"> 
			<span id="pVS_time_txt"></span> <br/>
			<span id="pVS_date_txt" style="padding-left:20px;"></span>
		</div>
		
		<div id="pVS_place">
			<img src="img/map-marker.png" width="16" height="16"> 
			<span id="pVS_pName"></span>
			<span style="float:right; font-weight:bold;"> 
				<img src="img/map.png" data-idx="" id="pVS_map" />
			</span>
			<br/>
			<span id="pVS_pAddr"></span>
		</div>
		
		<div id="pVS_detail">
		</div>

	</div> <!-- /content  -->

</div><!-- /page #pVSche -->


<!-- Start of Map Page -->
<div data-role="page" id="pMap"  data-theme="d" data-add-back-btn="true">
	
	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-theme="e" id="pM_header">
		<h1 id="pM_title">title</h1>
		<div style="text-align:center; font-weight:normal;" id="pM_addr">addr</div>
	</div>

	<div data-role="content" id="pMap_content" style="padding:0">

		<div id="googleMap" style="width:100%;"></div>

	</div> <!-- /content  -->

</div><!-- /page #pMap -->


<!-- Start of Sub Place List  -->
<div data-role="page" id="pSub_pList"  data-theme="d" data-add-back-btn="true">
	
	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-theme="d" id="pSub_pl_hd">
		<h1>MassKara 2012</h1>
		<button data-icon="search" class="ui-btn-right" data-iconpos="right" data-theme="e" id="pSubPL__mBtn">Map</button>
		<div class="ui-bar ui-bar-a" style="text-align:center" id="pSubPL__pTitle">
			place
		</div>
	</div> <!-- /header  -->

	<div data-role="content" id="pSub_pl_content">


	</div> <!-- /content  -->

</div> <!-- /page #pSub_pList -->



</body>
</html>